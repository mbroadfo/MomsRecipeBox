# MomsRecipeBox Environment Configuration
# ========================================
# Copy this file to .env and configure with your actual values
# NEVER commit the actual .env file to Git
#
# This project uses a profile-based deployment system. Common profiles:
# - local: Full local development (Docker containers)
# - atlas: Local backend with cloud database  
# - lambda: Testing against deployed Lambda API
# - cloud: Full production deployment
#
# Use: npm run profile:set <profile-name>

# ==============================================
# REQUIRED: AUTHENTICATION (Auth0)
# ==============================================

# Auth0 Configuration - Required for all profiles
AUTH0_DOMAIN=your-domain.auth0.com
AUTH0_API_AUDIENCE=https://momsrecipebox-admin-api

# Frontend Auth0 Application (SPA)
AUTH0_MRB_CLIENT_ID=your_spa_client_id

# Backend Auth0 Application (Machine-to-Machine)
AUTH0_M2M_CLIENT_ID=your_m2m_client_id
AUTH0_M2M_CLIENT_SECRET=your_m2m_client_secret

# ==============================================
# REQUIRED: DATABASE CONFIGURATION
# ==============================================

# Database name (consistent across all environments)
MONGODB_DB_NAME=moms_recipe_box_dev

# MongoDB Atlas Connection (Required for atlas, lambda, cloud profiles)
# Get this from your MongoDB Atlas dashboard
# MONGODB_ATLAS_URI=mongodb+srv://username:password@cluster.mongodb.net/moms_recipe_box_dev?retryWrites=true&w=majority

# Local MongoDB credentials (for local profile only)
MONGODB_ROOT_USER=admin
MONGODB_ROOT_PASSWORD=supersecret
MONGODB_URI=mongodb://admin:supersecret@localhost:27017/moms_recipe_box_dev?authSource=admin

# ==============================================
# OPTIONAL: APPLICATION SETTINGS
# ==============================================

# Application environment (development, staging, production)
NODE_ENV=development

# Local development server port (for local/atlas profiles)
LOCAL_HOST_PORT=3000

# Base URL for the application (used by UI and testing)
APP_BASE_URL=http://localhost:3000

# ==============================================
# OPTIONAL: HEALTH CHECK CONFIGURATION
# ==============================================

# Health check endpoints (uncomment if needed for monitoring)
# HEALTH_CHECK_MONGODB_ENABLED=true
# HEALTH_CHECK_AUTH0_ENABLED=true
# HEALTH_CHECK_S3_ENABLED=false

# ==============================================
# OPTIONAL: AWS CONFIGURATION
# ==============================================

# AWS Configuration (Required for lambda/cloud profiles with S3 image storage)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key

# S3 Configuration (for image uploads)
# S3_BUCKET_NAME=momsrecipebox-images
# S3_REGION=us-east-1

# ==============================================
# OPTIONAL: AI RECIPE GENERATION
# ==============================================

# OpenAI Configuration (for AI recipe features)
# OPENAI_API_KEY=your_openai_api_key

# Anthropic Configuration (alternative to OpenAI)
# ANTHROPIC_API_KEY=your_anthropic_api_key

# ==============================================
# OPTIONAL: TESTING CONFIGURATION
# ==============================================

# Test-specific overrides (only used during npm test)
# TEST_MONGODB_URI=mongodb://admin:supersecret@localhost:27017/moms_recipe_box_test?authSource=admin
# TEST_AUTH0_DOMAIN=your-test-domain.auth0.com

# ===============================================
# PROFILE USAGE EXAMPLES
# ===============================================
#
# Set your profile:
#   npm run profile:set local
#   npm run profile:set atlas
#   npm run profile:set lambda
#   npm run profile:set cloud
#
# Start the application:
#   npm start
#
# For more information, see docs/developer/DEPLOYMENT_PROFILES.md

# ==============================================
# AWS CONFIGURATION
# ==============================================

# AWS Region
AWS_REGION=us-west-2

# AWS Parameter Store (replaces Secrets Manager for cost optimization)
SSM_SECRETS_PARAMETER_NAME=/mrb/dev/secrets

# S3 Buckets
RECIPE_IMAGES_BUCKET=mrb-recipe-images-dev
MRB_MONGODB_BACKUPS_BUCKET=mrb-mongodb-backups-dev

# ==============================================
# AUTHENTICATION CONFIGURATION (Auth0)
# ==============================================

# Auth0 Domain
# AUTH0_DOMAIN=your-domain.auth0.com

# Auth0 Application Configuration
# AUTH0_CLIENT_ID=your_spa_client_id
# AUTH0_CLIENT_SECRET=your_spa_client_secret
# AUTH0_AUDIENCE=https://momsrecipebox/api

# Auth0 Machine-to-Machine Application (for admin functions)
# AUTH0_M2M_CLIENT_ID=your_m2m_client_id
# AUTH0_M2M_CLIENT_SECRET=your_m2m_client_secret

# ==============================================
# AI SERVICES CONFIGURATION
# ==============================================

# OpenAI Configuration
# OPENAI_API_KEY=your_openai_api_key_here

# Anthropic Configuration  
# ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Google AI Configuration
# GOOGLE_AI_API_KEY=your_google_ai_api_key_here

# ==============================================
# HEALTH CHECK CONFIGURATION
# ==============================================

# Enable/disable health checks at startup
ENABLE_STARTUP_HEALTH_CHECKS=true

# Enable/disable periodic health checks
ENABLE_PERIODIC_HEALTH_CHECKS=false

# Fail application startup on critical health issues
FAIL_ON_CRITICAL_HEALTH=false

# Enable data quality checks
ENABLE_DATA_QUALITY_CHECKS=true

# Health check timeout (milliseconds)
HEALTH_CHECK_TIMEOUT_MS=10000

# Periodic health check interval (milliseconds)
HEALTH_CHECK_INTERVAL_MS=300000

# Enable startup banner display
ENABLE_STARTUP_BANNER=true

# Data quality thresholds
MIN_CLEAN_PERCENTAGE=50
MAX_CRITICAL_ISSUES=0

# ==============================================
# TESTING CONFIGURATION
# ==============================================

# Test database name (used by test suite)
TEST_MONGODB_DB_NAME=moms_recipe_box_test

# Enable verbose logging during tests
TEST_VERBOSE=false

# ==============================================
# DEVELOPMENT CONFIGURATION
# ==============================================

# Enable debug logging
DEBUG=false

# Enable development features
DEV_MODE=true

# Hot reload for local development
WATCH_FILES=true

# ==============================================
# DEPLOYMENT MODE EXAMPLES
# ==============================================

# Fully Local Mode (everything local):
# MONGODB_MODE=local
# APP_MODE=express
# + Start with: docker-compose --profile local up -d

# Remote DB Mode (local app, cloud DB):
# MONGODB_MODE=atlas
# APP_MODE=express
# + Configure MONGODB_ATLAS_URI above
# + Start with: docker-compose --profile atlas up -d

# Remote Backend Mode (production deployment):
# MONGODB_MODE=atlas  
# APP_MODE=lambda
# + Deployed via Terraform to AWS Lambda
# + Configured in infra/app_api.tf