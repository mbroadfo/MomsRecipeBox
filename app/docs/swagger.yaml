openapi: 3.0.0
info:
  title: MomsRecipeBox API
  description: API documentation for the MomsRecipeBox backend
  version: 1.0.0
servers:
  - url: http://localhost:3000
  - url: https://sar6jpcqz1.execute-api.us-west-2.amazonaws.com/dev

tags:
  - name: recipes
    description: Recipe management operations
  - name: comments
    description: Recipe comment operations
  - name: likes
    description: Recipe like operations
  - name: images
    description: Recipe image operations
  - name: shopping-list
    description: Shopping list operations
  - name: ai-recipe-assistant
    description: AI-powered recipe creation and extraction operations
  - name: admin
    description: Admin operations for user management and system monitoring
  - name: system
    description: System and infrastructure operations for deployment and monitoring

paths:
  /recipes:
    post:
      tags:
        - recipes
      summary: Create a new recipe
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecipeInput'
      responses:
        '201':
          description: Recipe created
    get:
      tags:
        - recipes
      summary: Get a list of recipes
      parameters:
      - in: query
        name: owner_id
        schema:
          type: string
      - in: query
        name: visibility
        schema:
          type: string
      - in: query
        name: tags
        schema:
          type: string
      - in: query
        name: expand
        schema:
          type: string
      - in: query
        name: limit
        schema:
          type: integer
      - in: query
        name: offset
        schema:
          type: integer
      responses:
        '200':
          description: List of recipes

  /recipes/{id}:
    get:
      tags:
        - recipes
      summary: Get a specific recipe by ID
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
      - in: query
        name: expand
        schema:
          type: string
      responses:
        '200':
          description: A single recipe
    put:
      tags:
        - recipes
      summary: Update a specific recipe by ID
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecipeInput'
      responses:
        '200':
          description: Recipe updated
    delete:
      tags:
        - recipes
      summary: Delete a recipe by ID
      description: Delete a recipe and all associated images from S3 storage
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Recipe deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Recipe deleted successfully"
                  deletedImages:
                    type: integer
                    description: Number of images successfully deleted from S3
                    example: 3
                  imageErrors:
                    type: array
                    description: Array of any S3 deletion errors (if applicable)
                    items:
                      type: object
                      properties:
                        key:
                          type: string
                          description: S3 object key that failed to delete
                        error:
                          type: string
                          description: Error message
                required:
                  - message
                  - deletedImages
        '404':
          description: Recipe not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Recipe not found"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Internal server error"

  /recipes/{id}/comments:
    post:
      tags:
        - comments
      summary: Post a comment on a recipe
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentInput'
      responses:
        '200':
          description: Comment added

  /comments/{comment_id}:
    put:
      tags:
        - comments
      summary: Update a comment
      parameters:
      - in: path
        name: comment_id
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentInput'
      responses:
        '200':
          description: Comment updated
    delete:
      tags:
        - comments
      summary: Delete a comment
      parameters:
      - in: path
        name: comment_id
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Comment deleted

  /recipes/{id}/like:
    post:
      tags:
        - likes
      summary: Toggle like for a recipe
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_id:
                  type: string
      responses:
        '200':
          description: Like toggled
  /recipes/{id}/image:
    put:
      tags:
        - images
      summary: Upload or update an image for a recipe
      description: Upload or update an image using base64 encoding. Supports PNG and JPEG formats. Use this method for both initial upload and updates.
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        description: Recipe ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                imageBase64:
                  type: string
                  description: Base64-encoded image data
                contentType:
                  type: string
                  description: Content type of the image (image/png or image/jpeg)
                  enum: [image/png, image/jpeg]
            example:
              imageBase64: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8BQDwAEhQGAhKmMIQAAAABJRU5ErkJggg=="
              contentType: "image/png"
      responses:
        '200':
          description: Image updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Image updated successfully!
                  key:
                    type: string
                    example: 60f1e5b0e6b3a123456789ab.png
                  contentType:
                    type: string
                    example: image/png
        '400':
          description: Bad request - invalid input
        '404':
          description: Recipe not found
        '500':
          description: Internal server error
    delete:
      tags:
        - images
      summary: Delete an image for a recipe
      description: Delete a recipe's image. This will revert the recipe to use the default image.
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        description: Recipe ID
      responses:
        '200':
          description: Image deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Image deleted successfully!
        '404':
          description: Recipe or image not found
        '500':
          description: Internal server error
    get:
      tags:
        - images
      summary: Get an image for a recipe
      description: Retrieve an image for a recipe. If no image exists for the recipe, returns the default image.
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        description: Recipe ID
      - in: header
        name: Accept
        schema:
          type: string
          enum: [image/png, image/jpeg]
        description: Preferred image format (optional)
      responses:
        '200':
          description: Image fetched successfully
          content:
            image/png:
              schema:
                type: string
                format: binary
            image/jpeg:
              schema:
                type: string
                format: binary
            image/gif:
              schema:
                type: string
                format: binary
        '404':
          description: Recipe not found
        '500':
          description: Internal server error

  /shopping-list:
    get:
      tags:
        - shopping-list
      summary: Get a user's shopping list
      description: Retrieves the shopping list for a specific user
      parameters:
      - in: query
        name: user_id
        required: true
        schema:
          type: string
        description: User ID
      responses:
        '200':
          description: Shopping list retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShoppingList'
        '400':
          description: Missing required parameters
        '500':
          description: Internal server error
# The DELETE method on /shopping-list is not used
# Use /shopping-list/clear for clearing the shopping list

  /shopping-list/add:
    post:
      tags:
        - shopping-list
      summary: Add items to a shopping list
      description: Add one or more ingredients to a user's shopping list
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
                - items
              properties:
                user_id:
                  type: string
                  description: User ID
                items:
                  type: array
                  description: List of ingredients to add
                  items:
                    type: object
                    required:
                      - ingredient
                    properties:
                      ingredient:
                        type: string
                        description: Full ingredient text
                      recipe_id:
                        type: string
                        description: ID of the source recipe
                      recipe_title:
                        type: string
                        description: Title of the source recipe
                      category:
                        type: string
                        description: Optional grocery department category
            example:
              user_id: "user123"
              items:
                - ingredient: "2 tbsp olive oil"
                  recipe_id: "5f8a7b6c5d4e3c2b1a0987654"
                  recipe_title: "Mediterranean Pasta"
                - ingredient: "1 onion, diced"
                  recipe_id: "5f8a7b6c5d4e3c2b1a0987654"
                  recipe_title: "Mediterranean Pasta"
      responses:
        '200':
          description: Items added successfully
        '400':
          description: Missing required parameters
        '500':
          description: Internal server error

  /shopping-list/item/{itemId}:
    put:
      tags:
        - shopping-list
      summary: Update a shopping list item
      description: Update the status of an item in a shopping list (e.g., mark as checked)
      parameters:
      - in: path
        name: itemId
        required: true
        schema:
          type: string
        description: Shopping list item ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
                - checked
              properties:
                user_id:
                  type: string
                  description: User ID
                checked:
                  type: boolean
                  description: Whether the item is checked
      responses:
        '200':
          description: Item updated successfully
        '400':
          description: Missing required parameters
        '404':
          description: Item not found
        '500':
          description: Internal server error
    delete:
      tags:
        - shopping-list
      summary: Remove an item from a shopping list
      description: Delete a specific item from a user's shopping list
      parameters:
      - in: path
        name: itemId
        required: true
        schema:
          type: string
        description: Shopping list item ID
      - in: query
        name: user_id
        required: true
        schema:
          type: string
        description: User ID
      responses:
        '200':
          description: Item removed successfully
        '404':
          description: Item not found
        '500':
          description: Internal server error

  /shopping-list/clear:
    post:
      tags:
        - shopping-list
      summary: Clear a user's shopping list or mark all items as checked
      description: Remove all items from a user's shopping list or mark all as checked
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
              properties:
                user_id:
                  type: string
                  description: User ID
                action:
                  type: string
                  enum: [delete_all, check_all, delete_purchased]
                  description: Action to perform (delete all items, mark all as checked, or delete purchased items)
      responses:
        '200':
          description: Shopping list cleared or all items marked as checked
        '400':
          description: Missing required parameters
        '404':
          description: Shopping list not found
        '500':
          description: Internal server error
          
  /shopping-list/categorize:
    post:
      tags:
        - shopping-list
      summary: Categorize ingredients using AI
      description: Uses AI to categorize ingredients into grocery store departments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - ingredients
              properties:
                ingredients:
                  type: array
                  description: List of ingredient strings to categorize
                  items:
                    type: string
            example:
              ingredients: 
                - "1 cup flour"
                - "2 eggs"
                - "1/2 cup milk"
                - "1 tbsp olive oil"
      responses:
        '200':
          description: Ingredients categorized successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  categories:
                    type: object
                    additionalProperties:
                      type: string
                    description: Object mapping each ingredient to its category
                    example:
                      "1 cup flour": "Baking"
                      "2 eggs": "Dairy & Eggs"
                      "1/2 cup milk": "Dairy & Eggs"
                      "1 tbsp olive oil": "Spices & Condiments"
        '400':
          description: Missing required parameters
        '401':
          description: Unauthorized
        '500':
          description: Internal server error or AI service unavailable
          
  /ai/chat:
    post:
      tags:
        - ai-recipe-assistant
      summary: Chat with AI to create or modify recipes
      description: Interact with an AI assistant to help create recipes or extract recipe components from text. This endpoint can also process direct URLs and raw copy/pasted recipe content from websites.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - message
              properties:
                message:
                  type: string
                  description: The message to send to the AI assistant
                messages:
                  type: array
                  description: Optional array of previous messages in the conversation
                  items:
                    type: object
                    properties:
                      role:
                        type: string
                        enum: [user, assistant, system]
                        description: The role of the message sender
                      content:
                        type: string
                        description: The content of the message
                user_id:
                  type: string
                  description: Optional ID of the user for tracking purposes
            example:
              message: "Help me create a pasta recipe with tomatoes and basil."
            example2:
              message: "https://www.example.com/recipes/chocolate-cake"
            example3:
              message: "Featured\nRecipes\n\nEquipment\n\nIngredients\n\nLearn\n\nShows\n\nMagazines\n\nShop\nSearch\n\nButtermilk Mashed Potatoes\n4.5\n(44)\n14 Comments\nSide Dishes\nPotatoes\nGluten Free\nVegetarian\nAppears in Cook's Country February/March 2010\nToo many recipes are buttermilk in name only. We wanted to actually taste the stuff.\n\nYIELD Serves 4\n\nTIME 45 minutes\n..."
      responses:
        '200':
          description: AI assistant response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    description: The AI assistant's response
                  recipeData:
                    type: object
                    description: Optional structured recipe data if the AI recognized a complete recipe
                    properties:
                      title:
                        type: string
                      subtitle:
                        type: string
                      description:
                        type: string
                      author:
                        type: string
                      source:
                        type: string
                      yield:
                        type: string
                      cookTime:
                        type: string
                      ingredients:
                        type: array
                        items:
                          type: object
                          properties:
                            quantity:
                              type: string
                            name:
                              type: string
                      steps:
                        type: array
                        items:
                          type: string
                      tags:
                        type: array
                        items:
                          type: string
                      notes:
                        type: string
        '400':
          description: Missing required parameters or invalid input
        '500':
          description: Internal server error or AI service unavailable
  
  /ai/extract:
    post:
      tags:
        - ai-recipe-assistant
      summary: Extract structured recipe data from URL
      description: Extracts recipe data including title, ingredients, and instructions from a provided URL
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - url
              properties:
                url:
                  type: string
                  description: URL of the recipe to extract
                user_id:
                  type: string
                  description: Optional ID of the user for tracking purposes
            example:
              url: "https://www.example.com/recipes/chocolate-cake"
      responses:
        '200':
          description: Recipe data successfully extracted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    description: Status message about the extraction
                  recipeData:
                    type: object
                    description: Structured recipe data extracted from the URL
                    properties:
                      title:
                        type: string
                      subtitle:
                        type: string
                      description:
                        type: string
                      author:
                        type: string
                      source:
                        type: string
                      yield:
                        type: string
                      cookTime:
                        type: string
                      ingredients:
                        type: array
                        items:
                          type: object
                          properties:
                            quantity:
                              type: string
                            name:
                              type: string
                      steps:
                        type: array
                        items:
                          type: string
                      tags:
                        type: array
                        items:
                          type: string
                      notes:
                        type: string
        '400':
          description: Missing URL or invalid URL format
        '404':
          description: Could not access the URL or no recipe found
        '500':
          description: Internal server error or extraction service unavailable

  # Admin endpoints
  /admin/users:
    get:
      tags:
        - admin
      summary: List all users (Admin only)
      description: Retrieve a paginated list of all users with statistics
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number for pagination
        - in: query
          name: per_page
          schema:
            type: integer
            default: 20
          description: Number of users per page
        - in: query
          name: search
          schema:
            type: string
          description: Search users by name or email
      responses:
        '200':
          description: Users retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  users:
                    type: array
                    items:
                      $ref: '#/components/schemas/AdminUser'
                  stats:
                    $ref: '#/components/schemas/AdminUserStats'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
        '401':
          description: Unauthorized - Admin access required
        '403':
          description: Forbidden - Insufficient permissions

  /admin/users/invite:
    post:
      tags:
        - admin
      summary: Invite a new user (Admin only)
      description: Send an invitation to a new user
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                firstName:
                  type: string
                lastName:
                  type: string
              required:
                - email
                - firstName
                - lastName
      responses:
        '200':
          description: Invitation sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  user_id:
                    type: string
        '400':
          description: Invalid input data
        '401':
          description: Unauthorized - Admin access required
        '409':
          description: User already exists

  /admin/users/{userId}:
    delete:
      tags:
        - admin
      summary: Delete a user (Admin only)
      description: Permanently delete a user and all associated data
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: userId
          required: true
          schema:
            type: string
          description: User ID to delete
      responses:
        '200':
          description: User deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        '401':
          description: Unauthorized - Admin access required
        '404':
          description: User not found
        '500':
          description: Internal server error

  /admin/system-status:
    get:
      tags:
        - admin
      summary: Check comprehensive infrastructure status (Admin only)
      description: Test connectivity and get metrics for 8 infrastructure services including MongoDB, S3, API Gateway, Lambda, Backup System, Terraform state, Security/SSL, and Performance/CDN. Supports individual service testing via query parameter.
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: service
          schema:
            type: string
            enum: [mongodb, s3, api_gateway, lambda, backup, terraform, security, performance]
          description: Test specific service only (optional)
          example: mongodb
      responses:
        '200':
          description: Infrastructure status retrieved successfully
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: All services response
                    properties:
                      success:
                        type: boolean
                      timestamp:
                        type: string
                        format: date-time
                      overall_status:
                        type: string
                        enum: [operational, degraded]
                      services:
                        type: object
                        properties:
                          mongodb:
                            $ref: '#/components/schemas/InfrastructureService'
                          s3:
                            $ref: '#/components/schemas/InfrastructureService'
                          api_gateway:
                            $ref: '#/components/schemas/InfrastructureService'
                          lambda:
                            $ref: '#/components/schemas/InfrastructureService'
                          backup:
                            $ref: '#/components/schemas/InfrastructureService'
                          terraform:
                            $ref: '#/components/schemas/InfrastructureService'
                          security:
                            $ref: '#/components/schemas/InfrastructureService'
                          performance:
                            $ref: '#/components/schemas/InfrastructureService'
                  - type: object
                    description: Individual service response
                    properties:
                      success:
                        type: boolean
                      timestamp:
                        type: string
                        format: date-time
                      service:
                        type: string
                      result:
                        $ref: '#/components/schemas/InfrastructureService'
                      note:
                        type: string
        '400':
          description: Invalid service name
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
                  availableServices:
                    type: array
                    items:
                      type: string
        '401':
          description: Unauthorized - Admin access required
        '500':
          description: System status check failed
  /admin/ai-services-status:
    get:
      tags:
        - admin
      summary: Check AI services status for all providers (Admin only)
      description: Test connectivity and performance for all AI service providers with optional detailed timing
      security:
        - bearerAuth: []
      parameters:
        - name: test
          in: query
          required: false
          description: Type of AI test to perform
          schema:
            type: string
            enum: [basic, detailed]
            default: basic
        - name: includeUnavailable
          in: query
          required: false
          description: Include status for unavailable providers
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: AI services status retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  timestamp:
                    type: string
                    format: date-time
                  summary:
                    type: object
                    properties:
                      total_providers:
                        type: integer
                        description: Total number of AI providers tested
                      available_providers:
                        type: integer
                        description: Number of providers that are available
                      average_response_time:
                        type: number
                        description: Average response time in milliseconds
                  providers:
                    type: object
                    additionalProperties:
                      type: object
                      properties:
                        available:
                          type: boolean
                          description: Whether the provider is available
                        status:
                          type: string
                          enum: [success, error, unavailable]
                        message:
                          type: string
                          description: Status message or error details
                        response_time_ms:
                          type: number
                          description: Response time in milliseconds (if available)
                        provider:
                          type: string
                          description: Provider name for timing statistics
                        tested_at:
                          type: string
                          format: date-time
                          description: When this provider was tested
                  timing_stats:
                    type: object
                    properties:
                      fastest:
                        type: object
                        properties:
                          time_ms:
                            type: number
                            description: Fastest response time in milliseconds
                          provider:
                            type: string
                            description: Provider that achieved fastest time
                      slowest:
                        type: object
                        properties:
                          time_ms:
                            type: number
                            description: Slowest response time in milliseconds
                          provider:
                            type: string
                            description: Provider that had slowest time
                      average_ms:
                        type: number
                        description: Average response time across all available providers
                      total_providers_tested:
                        type: integer
                        description: Number of providers included in timing calculations
        '401':
          description: Unauthorized - Admin access required
        '500':
          description: AI services status check failed

  /initializeBuildMarker:
    post:
      tags:
        - system
      summary: Initialize build marker system (Internal/Development)
      description: |
        Initializes the build marker system for deployment verification. 
        This endpoint is used internally by deployment scripts to verify that 
        new code has been successfully deployed to the container.
        
        **Note**: This is primarily for development and CI/CD use.
      responses:
        '200':
          description: Build marker system initialized successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Build marker system initialized
                  timestamp:
                    type: string
                    format: date-time
                  initialized:
                    type: boolean
                    description: Whether the build marker system is now initialized
        '500':
          description: Build marker initialization failed

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ShoppingList:
      type: object
      properties:
        _id:
          type: string
          description: Shopping list ID
        user_id:
          type: string
          description: User ID
        items:
          type: array
          description: List of shopping items
          items:
            type: object
            properties:
              item_id:
                type: string
                description: Unique identifier for the item
              ingredient:
                type: string
                description: Full ingredient text
              recipe_id:
                type: string
                description: ID of the source recipe
              recipe_title:
                type: string
                description: Title of the source recipe
              added_at:
                type: string
                format: date-time
                description: When the item was added
              checked:
                type: boolean
                description: Whether the item has been checked off
              category:
                type: string
                description: Optional grocery department category
        created_at:
          type: string
          format: date-time
          description: When the shopping list was created
        updated_at:
          type: string
          format: date-time
          description: When the shopping list was last updated
      example:
        _id: "60f1e5b0e6b3a123456789ab"
        user_id: "user123"
        items:
          - item_id: "item1"
            ingredient: "2 tbsp olive oil"
            recipe_id: "5f8a7b6c5d4e3c2b1a0987654"
            recipe_title: "Mediterranean Pasta"
            added_at: "2025-08-27T10:30:00Z"
            checked: false
          - item_id: "item2"
            ingredient: "1 onion, diced"
            recipe_id: "5f8a7b6c5d4e3c2b1a0987654"
            recipe_title: "Mediterranean Pasta"
            added_at: "2025-08-27T10:30:00Z"
            checked: true
        created_at: "2025-08-27T10:30:00Z"
        updated_at: "2025-08-27T10:35:00Z"
    
    RecipeInput:
      type: object
      required:
      - owner_id
      - visibility
      - title
      properties:
        owner_id:
          type: string
        visibility:
          type: string
        status:
          type: string
        title:
          type: string
        subtitle:
          type: string
        description:
          type: string
        image_url:
          type: string
        tags:
          type: array
          items:
            type: string
        sections:
          type: array
          items:
            type: object
            properties:
              section_type:
                type: string
              content:
                type: string
              position:
                type: integer
        ingredients:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              quantity:
                type: string
              position:
                type: integer

    CommentInput:
      type: object
      properties:
        user_id:
          type: string
        content:
          type: string

    # Admin schemas
    AdminUser:
      type: object
      properties:
        user_id:
          type: string
          description: Unique user identifier
        email:
          type: string
          format: email
        firstName:
          type: string
        lastName:
          type: string
        createdAt:
          type: string
          format: date-time
        lastLogin:
          type: string
          format: date-time
          nullable: true
        loginCount:
          type: integer
          description: Total number of logins

    AdminUserStats:
      type: object
      properties:
        total_users:
          type: integer
          description: Total number of registered users
        active_users:
          type: integer
          description: Users who logged in within the last month
        new_users_this_month:
          type: integer
          description: New user registrations this month

    Pagination:
      type: object
      properties:
        current_page:
          type: integer
        total_pages:
          type: integer
        total_count:
          type: integer
        per_page:
          type: integer

    InfrastructureService:
      type: object
      properties:
        status:
          type: string
          enum: [operational, error, degraded]
        message:
          type: string
        stats:
          type: object
          additionalProperties: true
          description: Service-specific statistics (varies by service)
