{
  "type": "module",
  "scripts": {
    "db:analyze": "node tools/database/quality-analyzer.js",
    "db:fields": "node tools/database/field-analyzer.js",
    "dev": "npm run dev:local",
    "dev:local": "npm run stop:all && npm run mode:local && npm run start:local",
    "dev:atlas": "npm run stop:all && npm run mode:atlas && npm run start:atlas",
    "dev:lambda": "npm run stop:all && npm run mode:lambda && npm run start:lambda-local",
    "dev:full": "npm run dev:local && npm run ui:dev",
    "ui:dev": "cd ui && npm run dev",
    "ui:build": "cd ui && npm run build",
    "ui:preview": "cd ui && npm run preview",
    "ui:dev:local": "cd ui && npm run dev:local",
    "ui:dev:atlas": "cd ui && npm run dev:atlas",
    "ui:dev:lambda": "cd ui && npm run dev:lambda",
    "ui:build:local": "cd ui && npm run build:local",
    "ui:build:atlas": "cd ui && npm run build:atlas",
    "ui:build:lambda": "cd ui && npm run build:lambda",
    "ui:build:production": "cd ui && npm run build:production",
    "ui:preview:local": "cd ui && npm run preview:local",
    "ui:preview:atlas": "cd ui && npm run preview:atlas",
    "ui:preview:lambda": "cd ui && npm run preview:lambda",
    "fullstack:local": "concurrently \"npm run dev:local\" \"npm run ui:dev:local\"",
    "fullstack:atlas": "concurrently \"npm run dev:atlas\" \"npm run ui:dev:atlas\"",
    
    "deploy:ui": "node scripts/deploy-ui.js",
    "deploy:ui:dev": "node scripts/deploy-ui.js",
    "deploy:ui:prod": "node scripts/deploy-ui.js --prod",
    "deploy:ui:dry-run": "node scripts/deploy-ui.js --dry-run",
    "deploy:ui:skip-build": "node scripts/deploy-ui.js --skip-build",
    
    "deploy:full:dev": "npm run deploy:lambda:dev && npm run deploy:ui:dev",
    "deploy:full:prod": "npm run deploy:lambda:prod && npm run deploy:ui:prod",
    "env:local": "echo MONGODB_MODE=local > .env && echo APP_MODE=express >> .env",
    "env:atlas": "echo MONGODB_MODE=atlas > .env && echo APP_MODE=express >> .env",
    "env:lambda": "echo MONGODB_MODE=atlas > .env && echo APP_MODE=lambda >> .env",
    "start": "echo Use dev:local, dev:atlas, or dev:lambda instead",
    "start:local": "docker-compose --profile local up -d",
    "start:atlas": "docker-compose --profile atlas up -d",
    "start:lambda-local": "cd app && npm run start:lambda",
    "stop": "docker-compose down",
    "stop:all": "docker-compose --profile local --profile atlas down -v",
    "restart": "npm run stop:all && npm run dev",
    "test": "cd app && npm test",
    "test:all": "npm run test:local && npm run test:atlas && npm run test:lambda",
    "test:local": "npm run env:local && npm run start:local && sleep 10 && npm run test && npm run stop",
    "test:atlas": "echo 'Atlas testing requires valid MONGODB_ATLAS_URI in .env'",
    "test:lambda": "node scripts/test-lambda.js mrb-app-api",
    "test:lambda:safe": "node scripts/test-lambda.js mrb-app-api",
    "test:lambda:invoke": "node scripts/test-lambda.js mrb-app-api --invoke",
    "test:data": "node scripts/add-test-data.js",
    "test:data:recipe": "node scripts/add-test-data.js --type=recipe",
    "test:data:shopping": "node scripts/add-test-data.js --type=shopping",
    "maintenance:find-orphans": "node scripts/find-orphan-images.js",
    "maintenance:find-orphans:show-commands": "node scripts/find-orphan-images.js --show-commands",
    "health": "curl -s http://localhost:3000/health",
    "health:detailed": "curl -s http://localhost:3000/health/detailed",
    "validate": "node scripts/setup-environment.js validate",
    "validate:env": "node scripts/setup-environment.js validate",
    "validate:docker": "docker-compose config > nul && echo ✅ Docker configuration valid",
    "mode:show": "node scripts/switch-mode.js --show-current",
    "mode:local": "node scripts/switch-mode.js local --no-restart",
    "mode:atlas": "node scripts/switch-mode.js atlas --no-restart",
    "mode:lambda": "node scripts/switch-mode.js lambda --no-restart",
    "mode:switch": "node scripts/switch-mode.js",
    "mode:current": "node scripts/switch-mode.js --show-current",
    "mode:toggle": "node scripts/switch-mode.js",
    "mode:cleanup": "node scripts/switch-mode.js --cleanup",
    "aws:mrb-api": "node scripts/aws-profile.js mrb-api",
    "aws:terraform": "node scripts/aws-profile.js terraform-mrb",
    "aws:toggle": "node scripts/aws-profile.js toggle",
    "aws:status": "node scripts/aws-profile.js status",
    "aws:validate": "node scripts/aws-profile.js validate",
    "iam:setup": "node scripts/setup-iam-policy.js setup",
    "iam:status": "node scripts/setup-iam-policy.js status",
    "tunnel:start": "node scripts/db-tunnel.js start",
    "tunnel:stop": "node scripts/db-tunnel.js stop",
    "tunnel:status": "node scripts/db-tunnel.js status",
    "setup": "node scripts/setup-environment.js validate && cp .env.example .env && echo '✅ Environment file created. Please configure .env file.'",
    "setup:local": "node scripts/setup-environment.js setup local",
    "setup:atlas": "node scripts/setup-environment.js setup atlas",
    "setup:lambda": "node scripts/setup-environment.js setup lambda",
    "deploy:lambda": "node scripts/deploy-lambda.js",
    "deploy:lambda:prod": "node scripts/deploy-lambda.js --image-tag production",
    "deploy:dry-run": "node scripts/deploy-lambda.js --dry-run",
    "build": "cd app && docker build -t mrb-app .",
    "build:lambda": "cd app && docker build -f Dockerfile -t mrb-app-lambda .",
    "build:container": "node scripts/build-container.js",
    "build:push": "node scripts/build-container.js --update-lambda",
    "build:dry-run": "node scripts/build-container.js --dry-run",
    "backup:local": "node scripts/backup-mongodb.js --type local",
    "backup:atlas": "node scripts/backup-mongodb.js --type atlas --s3-upload",
    "backup:full": "node scripts/backup-mongodb.js --type full --s3-upload",
    "backup:archive": "node scripts/backup-mongodb.js --type archive --s3-upload",
    "backup:dry-run": "node scripts/backup-mongodb.js --dry-run",
    "restore:from-local": "node scripts/restore-mongodb.js",
    "restore:from-s3": "node scripts/restore-mongodb.js --from-s3",
    "restore:latest": "node scripts/restore-mongodb.js --latest",
    "restore:dry-run": "node scripts/restore-mongodb.js --dry-run --latest",
    "logs": "docker-compose logs -f",
    "logs:app": "docker-compose logs -f app-local app-atlas",
    "logs:db": "docker-compose logs -f mongo"
  },
  "dependencies": {
    "@aws-sdk/client-cloudfront": "^3.896.0",
    "@aws-sdk/client-s3": "^3.698.0",
    "@types/react-router-dom": "^5.3.3",
    "archiver": "^7.0.1",
    "commander": "^14.0.1",
    "dotenv": "^17.2.1",
    "extract-zip": "^2.0.1",
    "formidable": "^3.5.4",
    "jsonwebtoken": "^9.0.2",
    "jwks-rsa": "^3.2.0",
    "mongodb": "^6.18.0",
    "react-router-dom": "^7.7.1"
  },
  "devDependencies": {
    "concurrently": "^9.2.1"
  }
}
